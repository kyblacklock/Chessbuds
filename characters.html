<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chessbuds — Characters</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;1,9..40,400&family=Instrument+Serif:ital@0;1&display=swap');

  * { margin: 0; padding: 0; box-sizing: border-box; }

  :root {
    --text: #E8E4DF;
    --text-dim: #9A948C;
    --text-muted: #5C5850;
    --bg: #111110;
    --surface: rgba(20, 20, 18, 0.88);
    --surface-hover: rgba(40, 38, 34, 0.9);
    --border: rgba(255, 255, 255, 0.08);
    --border-hover: rgba(255, 255, 255, 0.16);
    --accent: #D4A574;
    --accent-dim: rgba(212, 165, 116, 0.4);
    --radius: 10px;
  }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'DM Sans', -apple-system, sans-serif;
    min-height: 100vh;
    -webkit-font-smoothing: antialiased;
    overflow-x: hidden;
  }

  /* ── Top bar ── */
  #top-bar {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 100;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 16px 20px;
    pointer-events: none;
  }

  #game-title {
    font-family: 'Instrument Serif', Georgia, serif;
    font-weight: 400;
    font-style: italic;
    font-size: 18px;
    letter-spacing: 0.02em;
    color: var(--text);
    position: absolute;
    top: 20px;
    left: 20px;
    opacity: 0.5;
    text-decoration: none;
    pointer-events: auto;
    transition: opacity 0.3s ease;
  }

  #game-title:hover { opacity: 0.8; }

  #nav-characters {
    position: absolute;
    top: 20px;
    right: 20px;
    font-family: 'DM Sans', sans-serif;
    font-size: 12px;
    font-weight: 500;
    letter-spacing: 0.06em;
    text-transform: uppercase;
    color: var(--text-dim);
    text-decoration: none;
    padding: 9px 20px;
    border: 1px solid var(--border);
    border-radius: var(--radius);
    background: var(--surface);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    pointer-events: auto;
    transition: all 0.2s ease;
  }

  #nav-characters:hover {
    background: var(--surface-hover);
    border-color: var(--border-hover);
    color: var(--text);
  }

  /* ── Page header ── */
  .page-header {
    padding-top: 120px;
    text-align: center;
    margin-bottom: 16px;
  }

  .page-header h1 {
    font-family: 'Instrument Serif', Georgia, serif;
    font-weight: 400;
    font-style: italic;
    font-size: 48px;
    letter-spacing: -0.02em;
    color: var(--text);
    opacity: 0;
    transform: translateY(20px);
    animation: fadeUp 0.8s ease forwards;
  }

  .page-header p {
    font-size: 14px;
    letter-spacing: 0.06em;
    text-transform: uppercase;
    color: var(--text-muted);
    margin-top: 12px;
    opacity: 0;
    transform: translateY(12px);
    animation: fadeUp 0.8s ease 0.15s forwards;
  }

  /* ── Shelf Grid ── */
  #shelf-view {
    max-width: 1060px;
    margin: 0 auto;
    padding: 40px 40px 120px;
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 40px 36px;
    transition: opacity 0.5s ease, transform 0.5s ease;
  }

  #shelf-view.hidden {
    opacity: 0;
    pointer-events: none;
    position: absolute;
    transform: scale(0.97);
  }

  /* ── Character Card ── */
  .char-card {
    cursor: pointer;
    display: flex;
    flex-direction: column;
    align-items: center;
    opacity: 0;
    transform: translateY(30px);
    animation: fadeUp 0.7s ease forwards;
    perspective: 800px;
  }

  .char-card:nth-child(1) { animation-delay: 0.15s; }
  .char-card:nth-child(2) { animation-delay: 0.25s; }
  .char-card:nth-child(3) { animation-delay: 0.35s; }
  .char-card:nth-child(4) { animation-delay: 0.45s; }
  .char-card:nth-child(5) { animation-delay: 0.55s; }
  .char-card:nth-child(6) { animation-delay: 0.65s; }

  .card-tilt {
    width: 100%;
    transition: transform 0.15s ease-out;
    transform-style: preserve-3d;
    will-change: transform;
  }

  .card-face {
    position: relative;
    width: 100%;
    aspect-ratio: 5 / 7;
    border-radius: 16px;
    overflow: hidden;
    background: linear-gradient(168deg, #1a1a18 0%, #141413 40%, #0f0f0e 100%);
    border: 1px solid rgba(255, 255, 255, 0.07);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    transition: border-color 0.4s ease, box-shadow 0.4s ease;
  }

  .char-card:hover .card-face {
    border-color: rgba(212, 165, 116, 0.25);
    box-shadow:
      0 25px 50px rgba(0, 0, 0, 0.5),
      0 0 0 1px rgba(212, 165, 116, 0.1),
      inset 0 1px 0 rgba(255, 255, 255, 0.04);
  }

  /* Inner card frame — playing card border */
  .card-frame {
    position: absolute;
    inset: 10px;
    border: 1px solid rgba(255, 255, 255, 0.04);
    border-radius: 10px;
    pointer-events: none;
    transition: border-color 0.4s ease;
  }

  .char-card:hover .card-frame {
    border-color: rgba(212, 165, 116, 0.12);
  }

  /* Corner accents */
  .card-corner {
    position: absolute;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2px;
    pointer-events: none;
    z-index: 2;
  }

  .card-corner.top { top: 18px; left: 20px; }
  .card-corner.bottom { bottom: 18px; right: 20px; transform: rotate(180deg); }

  .card-corner .corner-role {
    font-family: 'Instrument Serif', Georgia, serif;
    font-style: italic;
    font-size: 14px;
    color: var(--text-muted);
    line-height: 1;
    transition: color 0.4s ease;
  }

  .char-card:hover .card-corner .corner-role {
    color: var(--accent);
  }

  .card-corner .corner-pip {
    font-size: 9px;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    color: var(--text-muted);
    opacity: 0.5;
    transition: color 0.4s ease, opacity 0.4s ease;
  }

  .char-card:hover .card-corner .corner-pip {
    color: var(--accent);
    opacity: 0.6;
  }

  /* Character image — centered */
  .char-img-wrap {
    position: relative;
    z-index: 1;
    width: 62%;
    height: 62%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }

  .char-card:hover .char-img-wrap {
    transform: scale(1.04);
  }

  .char-img-wrap img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
    filter: drop-shadow(0 6px 20px rgba(0, 0, 0, 0.5));
    transition: filter 0.4s ease;
  }

  .char-card:hover .char-img-wrap img {
    filter: drop-shadow(0 10px 30px rgba(0, 0, 0, 0.6)) drop-shadow(0 0 40px rgba(212, 165, 116, 0.08));
  }

  /* Spotlight glow behind character */
  .card-glow {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 70%;
    height: 70%;
    background: radial-gradient(ellipse, rgba(212, 165, 116, 0.04) 0%, transparent 70%);
    pointer-events: none;
    transition: opacity 0.4s ease;
    opacity: 0;
  }

  .char-card:hover .card-glow {
    opacity: 1;
  }

  /* Holographic shine overlay */
  .card-shine {
    position: absolute;
    inset: 0;
    border-radius: 16px;
    pointer-events: none;
    z-index: 5;
    opacity: 0;
    transition: opacity 0.3s ease;
    background: radial-gradient(
      circle at var(--shine-x, 50%) var(--shine-y, 50%),
      rgba(255, 255, 255, 0.12) 0%,
      rgba(212, 165, 116, 0.06) 25%,
      transparent 60%
    );
    mix-blend-mode: screen;
  }

  .char-card:hover .card-shine {
    opacity: 1;
  }

  /* Card bottom name bar */
  .card-name-bar {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    padding: 20px 20px 22px;
    text-align: center;
    z-index: 2;
    background: linear-gradient(to top, rgba(14, 14, 13, 0.95) 0%, rgba(14, 14, 13, 0.6) 60%, transparent 100%);
  }

  .card-name-bar .char-name {
    font-family: 'Instrument Serif', Georgia, serif;
    font-style: italic;
    font-weight: 400;
    font-size: 18px;
    letter-spacing: -0.01em;
    color: var(--text);
    transition: color 0.3s ease;
  }

  .char-card:hover .card-name-bar .char-name {
    color: var(--accent);
  }

  /* ── Detail View ── */
  #detail-view {
    display: none;
    max-width: 1100px;
    margin: 0 auto;
    padding: 100px 40px 120px;
    opacity: 0;
    transform: translateY(16px);
  }

  #detail-view.active {
    display: block;
    animation: fadeUp 0.6s ease forwards;
  }

  .detail-back {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    font-family: 'DM Sans', sans-serif;
    font-size: 12px;
    font-weight: 500;
    letter-spacing: 0.06em;
    text-transform: uppercase;
    color: var(--text-dim);
    text-decoration: none;
    cursor: pointer;
    transition: all 0.2s ease;
    margin-bottom: 48px;
    border: none;
    background: none;
    padding: 10px 0;
  }

  .detail-back:hover { color: var(--text); }

  .detail-back svg {
    width: 16px;
    height: 16px;
    stroke: currentColor;
    transition: transform 0.2s ease;
  }

  .detail-back:hover svg {
    transform: translateX(-3px);
  }

  .detail-layout {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 80px;
    align-items: start;
  }

  .detail-illustration {
    position: sticky;
    top: 120px;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  .detail-img-frame {
    position: relative;
    width: 100%;
    max-width: 400px;
    aspect-ratio: 5 / 7;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 20px;
    background: linear-gradient(168deg, #1a1a18 0%, #141413 40%, #0f0f0e 100%);
    border: 1px solid rgba(255, 255, 255, 0.07);
    overflow: hidden;
  }

  .detail-img-frame::before {
    content: '';
    position: absolute;
    inset: 10px;
    border: 1px solid rgba(212, 165, 116, 0.1);
    border-radius: 14px;
    pointer-events: none;
  }

  .detail-img-frame::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 70%;
    height: 70%;
    background: radial-gradient(ellipse, rgba(212, 165, 116, 0.06) 0%, transparent 70%);
    pointer-events: none;
  }

  .detail-img-frame img {
    position: relative;
    z-index: 1;
    max-width: 70%;
    max-height: 80%;
    object-fit: contain;
    filter: drop-shadow(0 12px 40px rgba(0, 0, 0, 0.4));
    animation: floatPiece 6s ease-in-out infinite;
  }

  .detail-text {
    padding-top: 24px;
  }

  .detail-role {
    font-size: 11px;
    font-weight: 500;
    letter-spacing: 0.14em;
    text-transform: uppercase;
    color: var(--accent);
    margin-bottom: 12px;
    opacity: 0;
    transform: translateY(10px);
    animation: fadeUp 0.5s ease 0.2s forwards;
  }

  .detail-name {
    font-family: 'Instrument Serif', Georgia, serif;
    font-weight: 400;
    font-style: italic;
    font-size: 44px;
    letter-spacing: -0.02em;
    color: var(--text);
    line-height: 1.1;
    margin-bottom: 12px;
    opacity: 0;
    transform: translateY(10px);
    animation: fadeUp 0.5s ease 0.3s forwards;
  }

  .detail-epithet {
    font-family: 'Instrument Serif', Georgia, serif;
    font-style: italic;
    font-size: 18px;
    color: var(--text-dim);
    margin-bottom: 40px;
    opacity: 0;
    transform: translateY(10px);
    animation: fadeUp 0.5s ease 0.35s forwards;
  }

  .detail-divider {
    width: 40px;
    height: 1px;
    background: var(--accent-dim);
    margin-bottom: 40px;
    opacity: 0;
    animation: fadeUp 0.5s ease 0.4s forwards;
  }

  .detail-bio {
    font-size: 15.5px;
    font-weight: 300;
    line-height: 1.85;
    color: var(--text-dim);
    opacity: 0;
    transform: translateY(10px);
    animation: fadeUp 0.6s ease 0.45s forwards;
  }

  .detail-bio p { margin-bottom: 24px; }

  .detail-bio p:first-child::first-letter {
    font-family: 'Instrument Serif', Georgia, serif;
    font-style: italic;
    font-size: 52px;
    float: left;
    line-height: 0.85;
    margin-right: 8px;
    margin-top: 6px;
    color: var(--accent);
  }

  /* ── Other Characters Nav ── */
  .detail-others {
    margin-top: 80px;
    padding-top: 48px;
    border-top: 1px solid var(--border);
    opacity: 0;
    transform: translateY(10px);
    animation: fadeUp 0.5s ease 0.55s forwards;
  }

  .detail-others-label {
    font-size: 11px;
    font-weight: 500;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    color: var(--text-muted);
    margin-bottom: 20px;
  }

  .detail-others-grid {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 12px;
  }

  .other-card {
    cursor: pointer;
    border-radius: 12px;
    overflow: hidden;
    background: linear-gradient(168deg, #1a1a18 0%, #141413 40%, #0f0f0e 100%);
    border: 1px solid var(--border);
    aspect-ratio: 5 / 7;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    position: relative;
    transition: all 0.3s ease;
  }

  .other-card:hover {
    border-color: rgba(212, 165, 116, 0.25);
    transform: translateY(-3px);
    box-shadow: 0 12px 30px rgba(0, 0, 0, 0.4);
  }

  .other-card img {
    max-width: 60%;
    max-height: 55%;
    object-fit: contain;
    filter: drop-shadow(0 4px 10px rgba(0,0,0,0.4));
    transition: transform 0.3s ease;
  }

  .other-card:hover img {
    transform: scale(1.06);
  }

  .other-card-name {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    padding: 10px 6px;
    text-align: center;
    background: linear-gradient(to top, rgba(14,14,13,0.95), transparent);
    font-family: 'Instrument Serif', Georgia, serif;
    font-style: italic;
    font-size: 12px;
    color: var(--text-dim);
    transition: color 0.3s ease;
  }

  .other-card:hover .other-card-name {
    color: var(--accent);
  }

  /* ── Play CTA ── */
  .detail-cta {
    margin-top: 40px;
    text-align: center;
    opacity: 0;
    transform: translateY(10px);
    animation: fadeUp 0.5s ease 0.6s forwards;
  }

  .detail-cta a {
    display: inline-block;
    font-family: 'DM Sans', sans-serif;
    font-size: 14px;
    font-weight: 500;
    letter-spacing: 0.04em;
    color: var(--bg);
    background: var(--text);
    text-decoration: none;
    padding: 14px 40px;
    border-radius: var(--radius);
    transition: all 0.2s ease;
  }

  .detail-cta a:hover {
    background: #fff;
  }

  /* ── Animations ── */
  @keyframes fadeUp {
    to { opacity: 1; transform: translateY(0) scale(1); }
  }

  @keyframes floatPiece {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-8px); }
  }

  /* ── Responsive ── */
  @media (max-width: 900px) {
    #shelf-view {
      grid-template-columns: repeat(2, 1fr);
      padding: 32px 24px 100px;
      gap: 28px 20px;
    }

    .detail-layout {
      grid-template-columns: 1fr;
      gap: 48px;
    }

    .detail-illustration { position: static; align-items: center; }
    .detail-img-frame { max-width: 300px; }
    .detail-name { font-size: 36px; }
    .page-header h1 { font-size: 36px; }
  }

  @media (max-width: 560px) {
    #shelf-view {
      grid-template-columns: repeat(2, 1fr);
      gap: 20px 14px;
      padding: 24px 16px 80px;
    }

    .card-name-bar .char-name { font-size: 14px; }
    .card-corner .corner-role { font-size: 12px; }

    .detail-others-grid { grid-template-columns: repeat(3, 1fr); }
    .detail-layout { gap: 32px; }
    #detail-view { padding: 90px 20px 80px; }
    .page-header { padding-top: 84px; }
    .page-header h1 { font-size: 30px; }
  }

</style>
</head>
<body>

<!-- Navigation -->
<div id="top-bar">
  <a id="game-title" href="index.html">Chessbuds</a>
  <a id="nav-characters" href="characters.html">Characters</a>
</div>

<!-- Page Header -->
<div class="page-header">
  <h1>Meet the Chessbuds</h1>
  <p>The Champions of the Board</p>
</div>

<!-- Shelf View -->
<div id="shelf-view"></div>

<!-- Detail View -->
<div id="detail-view">
  <button class="detail-back" onclick="hideDetail()">
    <svg viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 12H5"/><polyline points="12 19 5 12 12 5"/></svg>
    All Characters
  </button>
  <div class="detail-layout">
    <div class="detail-illustration">
      <div class="detail-img-frame">
        <img id="detail-img" src="" alt="" draggable="false">
      </div>
    </div>
    <div class="detail-text">
      <div class="detail-role" id="detail-role"></div>
      <h2 class="detail-name" id="detail-name"></h2>
      <div class="detail-epithet" id="detail-epithet"></div>
      <div class="detail-divider"></div>
      <div class="detail-bio" id="detail-bio"></div>
    </div>
  </div>

  <!-- Other Characters -->
  <div class="detail-others" id="detail-others">
    <div class="detail-others-label">Other Characters</div>
    <div class="detail-others-grid" id="detail-others-grid"></div>
  </div>

  <!-- Play CTA -->
  <div class="detail-cta">
    <a href="index.html">Play a Game</a>
  </div>
</div>

<script>

const characters = {
  king: {
    name: 'King Leo Longmane',
    role: 'King',
    pip: 'K',
    epithet: 'The Wise Sovereign of Chessbuds Kingdom',
    img: 'Character Illustrations/King.png',
    bio: `<p>Proud, regal and wise, King Leo Longmane is the very picture of courtly power and grace. Feared by his enemies and venerated by his subjects, the mighty Leo once united a realm through authority and compassion.</p><p>Heavy is the head that wears the crown, though, and a prolonged reign has taken its toll on the aged king. Still, while his steps may be slower than they once were, King Leo continues to command the front. So long as he stands to fight, the battle is never over.</p>`
  },
  queen: {
    name: 'Queen Beatrix the Brave',
    role: 'Queen',
    pip: 'Q',
    epithet: 'The Unmatched Queen Bee',
    img: 'Character Illustrations/Queen.png',
    bio: `<p>It is said that behind every great man there is an even greater woman. Yet Queen Beatrix stands behind no man — she towers over all, despite her bantam insectile stature. In taverns and pubs all across the kingdom, reverential stories are swapped of her multifaceted battle prowess, one that combines the agility of Big Bishop Bernard with the brute strength of Rook O'Roark.</p><p>There are even those who say (although never when King Leo is listening) that in this land, it is she who truly wears the crown, so to speak. Whether that is true or false, no one can say, but woe to the player who finds him or herself face to face with the Queen Bee, anywhere along the field of play.</p>`
  },
  bishop: {
    name: 'Big Bishop Bernard',
    role: 'Bishop',
    pip: 'B',
    epithet: 'The Right Hand of the King',
    img: 'Character Illustrations/Bishop.png',
    bio: `<p>As the voice of God and the right hand of the king, it's fair to say that Big Bishop Bernard knows a thing or two about playing the angles. One by one, his challengers have attempted to unseat his place in King Leo's affections, and one by one they have been turned back. Many are those who have measured themselves against the Bishop, and come up short.</p><p>Starting every battle in his honored position next to the king, Big Bernard's fast, cutting attacks are capable of tearing armies to shreds in a matter of minutes. Clad in a loose fitting tunic, the Bishop's true speed is hidden until the moment he leaps out from behind the wall of pawns towards the unsuspecting enemy. By that point, it is already too late.</p>`
  },
  knight: {
    name: 'Nigel Knight',
    role: 'Knight',
    pip: 'N',
    epithet: 'The Laughing Horse',
    img: 'Character Illustrations/Knight.png',
    bio: `<p>How to predict the actions of a madman? How indeed. As delusional as he is dangerous, "The Laughing Horse" zigzags across the field of battle to the confusion and horror of his opposition, a lunatic grin plastered across his dappled muzzle.</p><p>Yet Nigel isn't "horsing around" when it comes to war. A prodigious swordsman since he was just a pony, the knight is considered the most creative and crafty warrior in Chessbuds Kingdom. So long as he remains on the field, no line of defense, no matter how well structured, is safe.</p>`
  },
  rook: {
    name: "Rook O'Roark",
    role: 'Rook',
    pip: 'R',
    epithet: 'The Straight Shooter',
    img: 'Character Illustrations/Rook.png',
    bio: `<p>The rook has always been a straight shooter. Built like Hercules but with wings (although he never brings that up: King Leo has a strong opinion on the heretical Greeks, and likes to keep his fire pit well fueled), O'Roark has been known to carry away even the heaviest of foes without even losing his breath.</p><p>When not punching shotgun holes with a single flick of his razor sharp talons, he can be found holding down the perimeter of King Leo's legendary legion. Simple of design, he has no time for the cross-eyed antics of Nigel Knight. He prefers the direct attack, flying forwards, backwards, and sideways with a clean power that has been known to pin down the enemy's resources for entire battles, leaving them defenseless and easily overcome.</p>`
  },
  pawn: {
    name: 'Pawdrick the Pawn',
    role: 'Pawn',
    pip: 'P',
    epithet: 'The Valiant Squire',
    img: 'Character Illustrations/Pawn.png',
    bio: `<p>Don't let his size fool you — Pawdrick is as tough as they come! A valiant squire of humble origin, Pawdrick clawed his way out of strenuous serfdom to earn a coveted spot in King Longmane's retinue.</p><p>There are many who dismiss the Pawn, preferring to lather their attention on the larger players who stand behind him. But underestimate Pawdrick at your own peril; his courage and pluck have decided too many battles to count. Scrappy, loyal and steadfast, this little squirrel is honored to serve on the front line of Chessbuds Kingdom.</p>`
  }
};

// ── Build cards ──
const shelfView = document.getElementById('shelf-view');
const detailView = document.getElementById('detail-view');
const pageHeader = document.querySelector('.page-header');

const order = ['king', 'queen', 'bishop', 'knight', 'rook', 'pawn'];

order.forEach((key) => {
  const c = characters[key];
  const card = document.createElement('div');
  card.className = 'char-card';
  card.onclick = () => showDetail(key);

  card.innerHTML = `
    <div class="card-tilt">
      <div class="card-face">
        <div class="card-frame"></div>
        <div class="card-corner top">
          <span class="corner-role">${c.pip}</span>
          <span class="corner-pip">${c.role}</span>
        </div>
        <div class="card-corner bottom">
          <span class="corner-role">${c.pip}</span>
          <span class="corner-pip">${c.role}</span>
        </div>
        <div class="card-glow"></div>
        <div class="char-img-wrap">
          <img src="${c.img}" alt="${c.name}" draggable="false">
        </div>
        <div class="card-name-bar">
          <div class="char-name">${c.name}</div>
        </div>
        <div class="card-shine"></div>
      </div>
    </div>
  `;
  shelfView.appendChild(card);
});

// ── 3D Tilt + Shine ──
document.querySelectorAll('.char-card').forEach(card => {
  const tilt = card.querySelector('.card-tilt');
  const shine = card.querySelector('.card-shine');

  card.addEventListener('mousemove', (e) => {
    const rect = card.getBoundingClientRect();
    const x = (e.clientX - rect.left) / rect.width;
    const y = (e.clientY - rect.top) / rect.height;

    const rotateY = (x - 0.5) * 14;
    const rotateX = (0.5 - y) * 14;

    tilt.style.transform = `rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;
    shine.style.setProperty('--shine-x', `${x * 100}%`);
    shine.style.setProperty('--shine-y', `${y * 100}%`);
  });

  card.addEventListener('mouseleave', () => {
    tilt.style.transform = 'rotateX(0deg) rotateY(0deg)';
  });
});

// ── Detail View ──
function showDetail(key) {
  const c = characters[key];
  if (!c) return;

  document.getElementById('detail-img').src = c.img;
  document.getElementById('detail-img').alt = c.name;
  document.getElementById('detail-role').textContent = c.role;
  document.getElementById('detail-name').textContent = c.name;
  document.getElementById('detail-epithet').textContent = c.epithet;
  document.getElementById('detail-bio').innerHTML = c.bio;

  // Build other characters grid
  const othersGrid = document.getElementById('detail-others-grid');
  othersGrid.innerHTML = '';
  order.filter(k => k !== key).forEach(k => {
    const o = characters[k];
    const card = document.createElement('div');
    card.className = 'other-card';
    card.onclick = (e) => { e.stopPropagation(); showDetail(k); };
    const shortNames = { king: 'Leo', queen: 'Beatrix', bishop: 'Bernard', knight: 'Nigel', rook: "O'Roark", pawn: 'Pawdrick' };
    card.innerHTML = `<img src="${o.img}" alt="${o.name}" draggable="false"><div class="other-card-name">${shortNames[k]}</div>`;
    othersGrid.appendChild(card);
  });

  shelfView.classList.add('hidden');
  pageHeader.style.display = 'none';

  detailView.classList.remove('active');
  void detailView.offsetWidth;
  detailView.classList.add('active');

  detailView.querySelectorAll('.detail-role, .detail-name, .detail-epithet, .detail-divider, .detail-bio, .detail-others, .detail-cta').forEach(el => {
    el.style.animation = 'none';
    void el.offsetWidth;
    el.style.animation = '';
  });

  window.scrollTo({ top: 0, behavior: 'instant' });
  history.pushState({ character: key }, '', `#${key}`);
}

function hideDetail() {
  detailView.classList.remove('active');
  pageHeader.style.display = '';
  shelfView.classList.remove('hidden');

  document.querySelectorAll('.char-card').forEach(card => {
    card.style.animation = 'none';
    void card.offsetWidth;
    card.style.animation = '';
  });

  window.scrollTo({ top: 0, behavior: 'instant' });
  history.pushState(null, '', window.location.pathname);
}

window.addEventListener('popstate', (e) => {
  if (e.state && e.state.character) {
    showDetail(e.state.character);
  } else {
    hideDetail();
  }
});

if (window.location.hash) {
  const key = window.location.hash.slice(1);
  if (characters[key]) showDetail(key);
}

</script>
</body>
</html>
